# 第二章 端到端的机器学习项目

本章将介绍一个端到端的项目案例。主要经历的步骤有：

1. 考虑大局

2. 获得数据

3. 从数据探索和可视化中洞察数据

4. 机器学习算法的数据准备

5. 选择并训练模型

6. 微调模型

7. 展示解决方案

8. 启动、监控和维护系统

## 2.1 使用真实数据

学习机器学习最好使用真实数据进行实验，而不仅仅是人工数据集。常见获取数据的地方有：

1. 流行的开放数据存储库

    - [UC Irvine Machine Learning Repository](http://archive.ics.uci.edu/ml/)
    - 
    - [Kaggle datasets](https://www.kaggle.com/datasets)

    - [Amazon’s AWS datasets](http://aws.amazon.com/fr/datasets/)

2. 元门户站点（它们会列出开放的数据存储库）

    - [Data Portals](http://dataportals.org/)

    - [OpenDataMonitor](http://opendatamonitor.eu/)

    - [Quandl](http://quandl.com/)

3. 其他一些列出许多流行的开放数据存储库的页面：

    - [Wikipedia’s list of Machine Learning datasets](https://goo.gl/SJHN2k)

    - [Quora.com](http://goo.gl/zDR78y）)

    - [The datasets subreddit](https://www.reddit.com/r/datasets)

本章从StatLib库中选择了加州住房价格的数据集。该数据集基于1990年加州人口普查的数据。虽然不算是最新的数据，但是有很多可以学习的特质。出于教学目的，我们还特意添加了一个分类属性，并且移除了一些特征。

[图1_加州住房价格]()

## 2.2 考虑大局（look at the big picture）

目前需要做的是使用加州人口普查的数据建立起加州的房价模型。数据中有许多指标，诸如每个街区（区域）的人口数量、收入中位数、房价中位数等。

### 2.2.1 框架问题

1. 确定业务目标

    首先应该确定的是**业务目标是什么**？例如针对本例，该模型的输出（对一个区域房价中位数的预测）将会与其他信息数据一同传输给另一个机器学习系统，而这个下游系统将用来决策一个给定的区域是否值得投资。因为直接影响到收益，所以正确获得这个信息至关重要。

    [图2_一个针对房地产投资的机器学习流水线]()

    **流水线（piplines）**：一个序列的数据处理组件称为一个数据流水线。流水线在机器学习系统中非常普遍，因为需要大量的数据操作和数据转化才能应用。

    组件之间通常是异步运行的。每个组件拉取大量的数据，然后进行处理，再将结果传输给
    另一个数据仓库。每个组件都很独立：**组件和组件之间的连接只有数据仓库**。这样一来，即使某个组件发生故障，它下游的组件还能使用前面的最后一次输出继续正常运行一段时间，使得**整体架构鲁棒性较强**。

2. 掌握前期解决方案基础

    然后需要掌握当前已有的解决方案，可以此作为参考。

3. 设计系统

    确定问题框架：选择监督学习、无监督学习还是强化学习？是分类任务、回归任务还是其他任务？应该使用批量学习还是在线学习技术？

    根据问题描述可知：这属于监督学习、回归任务且是多重回归问题（使用了多个特征）。最后，该问题中没有一个连续的数据流不断流进系统，所以不需要针对变化的数据做出特别调整，数据量也不是很大，不需要多个内存，所以简单的批量学习应该就能胜任。

### 2.2.2 选择性能指标

回归问题的典型性能指标是**均方根误差**（RMSE）。它给出了系统通常会在预测中产生多大误差，对于较大的误差，权重较高。